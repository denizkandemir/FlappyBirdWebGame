*{box-sizing:border-box}
:root{
  --panel:#ffffff; --ink:#1b1f24; --shadow:rgba(0,0,0,.15);
  --gb1:#0f380f; --gb2:#306230; --gb3:#8bac0f; --gb4:#9bbc0f;
}
html,body{height:100%;margin:0;padding:0;font-family:'Press Start 2P','Silkscreen',monospace;color:var(--ink);}
body{
  background: radial-gradient(120% 80% at 50% 10%, #ff6ec7 0%, #6929b5 40%, #15052b 70%, #0b031a 100%);
  display:flex;align-items:center;justify-content:center;overflow:hidden;
}
.synth-bg{background: radial-gradient(120% 80% at 50% 10%, rgba(255,110,199,.9) 0%, rgba(105,41,181,.85) 40%, rgba(21,5,43,.9) 70%, rgba(11,3,26,.95) 100%);}
#gameWrap{position:relative; width:min(95vw, 900px);}
#game{ display:block; width:min(95vw, 900px); height:auto; max-height:95vh; aspect-ratio:1/1; box-shadow:0 10px 30px var(--shadow); border-radius:0; background:transparent; z-index:0; }

#hudWrap{position:fixed;bottom:6px;left:50%;transform:translateX(-50%);width:min(900px,95vw);pointer-events:none;z-index:20}
#hud{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:8px;pointer-events:none}
.pixel-hud-center{justify-self:center;pointer-events:auto;background:rgba(255,255,255,.7);border:4px solid #111827;padding:.2rem .6rem;font-weight:800}
.pixel-hud-left{justify-self:start;pointer-events:auto;display:flex;gap:4px}
.pixel-hud-right{justify-self:end;display:flex;gap:6px;align-items:center;background:#fff;border:4px solid #111827;padding:.2rem .6rem;pointer-events:auto}
#hudPower{display:flex;align-items:center;gap:6px;background:#fff;border:4px solid #111827;padding:.2rem .6rem;font-weight:800}
.heartSvg{width:26px;height:26px;filter:drop-shadow(0 2px 0 rgba(0,0,0,.2));}
body.in-battle #hudWrap{position:fixed;bottom:6px;left:50%;transform:translateX(-50%);width:min(900px,95vw);pointer-events:none;z-index:20}

.overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:30}
.overlay.show{display:flex}
.panel{background:var(--panel);color:var(--ink);max-width:720px;width:min(92vw,720px);border-radius:12px;padding:22px 22px 18px;box-shadow:0 20px 60px var(--shadow)}
.row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}

.dex{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px; max-height:420px; overflow-y:auto;}
.dex .card{border:4px solid #111827;border-radius:0;padding:10px;display:grid;grid-template-columns:60px 1fr;gap:10px;align-items:center;background:#fff;box-shadow: 0 0 0 2px #fff inset, 0 6px 0 #111827}
.dex .thumb{width:60px;height:60px;border:1px solid #e5e7eb;background:#f8fafc;display:flex;align-items:center;justify-content:center}
.dex .meta{font-size:.85rem;color:#555}
.dex .title{font-weight:700;margin-bottom:2px}
.dex .card.selectable{cursor:pointer;user-select:none;transition:transform .05s}
.dex .card.selected{outline:none; border:6px solid #ffffff; box-shadow:0 0 0 4px #0f380f, 0 6px 0 #0f380f; transform: translateY(-2px);}

.battle-overlay{position:absolute;inset:0;display:none;pointer-events:none;z-index:10}
.battle-overlay.show{display:block}
.pixel-panel{border:4px solid #111827;box-shadow: 0 0 0 2px #fff inset, 0 6px 0 #111827;background:#f8fafc;border-radius:0;}
.pixel-btn,.pixel-input,.btn{border:4px solid #111827;border-radius:0;font-weight:800;box-shadow:0 4px 0 #111827;padding:.6rem 1rem;background:#fff;cursor:pointer;}
.btn.ghost{opacity:.5; pointer-events:none}
.pixel-btn:active,.btn:active{transform:translateY(2px);box-shadow:0 2px 0 #111827;}
.pixel-btn.primary{background:#f59e0b}.pixel-btn.success{background:#34d399}.pixel-btn.danger{background:#f87171}
.pixel-input{flex:1}
.battle-dialog{position:absolute;left:12px;right:12px;bottom:18px;padding:10px;pointer-events:auto;}
.battle-toi{position:absolute;left:12px;right:12px;padding:8px;display:flex;align-items:center;justify-content:space-between;pointer-events:auto;}
.dialog-row{display:flex;gap:8px;margin-top:6px;align-items:center}

.sortSel{font-weight:800;border:4px solid #111827;background:#fff;box-shadow: 0 4px 0 #111827;border-radius:0;padding:.2rem .4rem}

.gb-panel{background: linear-gradient(180deg, #9bbc0f, #8bac0f);color: #0f380f;border: 6px solid #0f380f;box-shadow: inset 0 0 0 6px #306230, 0 8px 0 #0f380f;border-radius: 0; text-align:center;}
.gb-title{ font-family: monospace; font-size: 40px; font-weight: 900; letter-spacing: 2px; text-shadow: 2px 2px 0 #306230; margin-top:4px;}
.gb-sub{ font-family: monospace; font-size: 14px; letter-spacing: 1px; opacity:.85; margin-bottom: 10px;}
.press-start{ font-family: monospace; margin: 10px 0 12px; font-weight: 800; }
.blink{ animation: blink 1s step-start infinite; } @keyframes blink { 50% { opacity: 0; } }
.gb-btn{ background: #9bbc0f; color: #0f380f; border-color: #0f380f; box-shadow: 0 4px 0 #0f380f; }
.gb-h2, .gb-h3 { font-family: monospace; letter-spacing: 1px; }
.gb-details summary { font-family: monospace; cursor:pointer; }

/* GB style for battle panels */
.battle-overlay .pixel-panel{
  background: linear-gradient(180deg, #cde47a, #a6c94a);
  border: 6px solid #0f380f;
  box-shadow: inset 0 0 0 6px #306230, 0 6px 0 #0f380f;
}
.battle-overlay .pixel-btn,
.battle-overlay .pixel-input{
  border: 4px solid #0f380f;
  background: #9bbc0f;
  color: #0f380f;
  box-shadow: 0 4px 0 #0f380f;
}
.battle-overlay .pixel-btn.success{ background:#a7e676 }
.battle-overlay .pixel-btn.primary{ background:#ddef8f }
.battle-overlay .pixel-btn.danger{ background:#e6b58f }
.battle-overlay .pixel-input{ background:#e7f3b0; }

/* Retro 8-bit HUD bar at bottom */
.pixel-hud-bar{background:var(--gb4); border:4px solid var(--gb1); box-shadow:0 4px 0 var(--gb1); padding:6px 10px; display:flex; align-items:center; justify-content:space-between; image-rendering:pixelated;}
#hud{background:var(--gb4); border:4px solid var(--gb1); box-shadow:0 4px 0 var(--gb1); padding:6px 10px; border-radius:0;}
#hud .pixel-hud-left,#hud .pixel-hud-center,#hud .pixel-hud-right{pointer-events:auto}
#score{font-weight:800}
#balls{display:flex;align-items:center;gap:6px}
.logo-title{width:min(78vw,520px);image-rendering:pixelated}
.row.center{justify-content:center}
/* Details / Collection look */
.dex .card{image-rendering:pixelated}

img{image-rendering:pixelated}

/* --- Scoreboard layout --- */
.score-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin:10px 0 16px}
.score-col{border:4px solid var(--gb1);box-shadow:0 4px 0 var(--gb1);padding:10px;background:var(--gb4)}
.score-title{text-align:center;margin-bottom:8px;font-weight:800}
.score-row{display:flex;align-items:center;justify-content:space-between;margin:4px 0}
.score-row span{opacity:.9}

/* Corruption overlay */
.corrupt-visual img{image-rendering:pixelated; width:128px; height:128px; border:6px solid #ffffff; box-shadow:0 0 0 4px var(--gb1), 0 6px 0 var(--gb1); background:var(--gb4)}

/* Ensure full collection is visible on Start screen */
#startScreen .dex{ max-height: 52vh; overflow:auto; padding-right:6px }
#startScreen .gb-panel{ max-height: 80vh; overflow:auto }

#sortControlsStart{display:flex;gap:8px;align-items:center}


/* Monster select dropdown (Start screen) */
#selectRowStart { align-items: center; }
#selectRowStart label { margin-right: 8px; }
#monsterSelectStart { flex:1; padding:8px; border:4px solid #111827; box-shadow: 0 4px 0 #111827; background:#fff; font-family: inherit; }
